<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Du Bois Does Data - Educational Hub</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

  @font-face { font-family: 'VTC Du Bois'; src: url('VTC Du Bois Desktop/TTF/Upright/VTCDuBois-Regular.ttf') format('truetype'); font-weight: 400; font-style: normal; }
  @font-face { font-family: 'VTC Du Bois'; src: url('VTC Du Bois Desktop/TTF/Upright/VTCDuBois-Bold.ttf') format('truetype'); font-weight: 700; font-style: normal; }
  @font-face { font-family: 'VTC Du Bois'; src: url('VTC Du Bois Desktop/TTF/Upright/VTCDuBois-Light.ttf') format('truetype'); font-weight: 300; font-style: normal; }
  @font-face { font-family: 'VTC Du Bois'; src: url('VTC Du Bois Desktop/TTF/Italic/VTCDuBois-Italic.ttf') format('truetype'); font-weight: 400; font-style: italic; }
  @font-face { font-family: 'VTC Du Bois'; src: url('VTC Du Bois Desktop/TTF/Italic/VTCDuBois-BoldItalic.ttf') format('truetype'); font-weight: 700; font-style: italic; }
  :root {
    --crimson: #8B1A1A;
    --gold: #C5A55A;
    --dark-gold: #B8960C;
    --black: #1a1a1a;
    --dark-green: #2D5A3D;
    --parchment: #F5F0E8;
    --warm-bg: #D4C5A0;
    --tan: #E8DCC8;
    --brown: #6B4226;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  html { scroll-behavior: smooth; }
  body { font-family: 'Inter', sans-serif; background: var(--parchment); color: var(--black); }

  /* HERO */
  .hero {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    background: linear-gradient(135deg, var(--black) 0%, #2c1810 35%, #3a2215 65%, var(--black) 100%);
    position: relative;
    overflow: hidden;
    padding: 60px 20px;
  }
  .hero::before {
    content: '';
    position: absolute;
    inset: 0;
    background:
      radial-gradient(ellipse at 20% 40%, rgba(139,26,26,0.18) 0%, transparent 55%),
      radial-gradient(ellipse at 80% 60%, rgba(197,165,90,0.12) 0%, transparent 55%);
  }
  /* Spiral SVG decoration */
  .spiral-left, .spiral-right {
    position: absolute;
    opacity: 0.05;
    width: 500px;
    height: 500px;
  }
  .spiral-left { left: -100px; top: 10%; }
  .spiral-right { right: -100px; bottom: 10%; transform: rotate(180deg); }

  .hero-content { position: relative; z-index: 2; max-width: 900px; }
  .hero-badge {
    display: inline-block;
    background: var(--crimson);
    color: white;
    padding: 8px 24px;
    border-radius: 30px;
    font-size: 0.85rem;
    font-weight: 700;
    letter-spacing: 3px;
    text-transform: uppercase;
    margin-bottom: 30px;
    animation: fadeDown 0.8s ease-out;
  }
  .hero h1 {
    font-family: 'VTC Du Bois', 'Playfair Display', serif;
    font-size: clamp(3rem, 7vw, 5.5rem);
    color: white;
    line-height: 1.05;
    margin-bottom: 12px;
    animation: fadeDown 0.8s ease-out 0.1s both;
  }
  .hero h1 span { color: var(--gold); }
  .hero h2 {
    font-family: 'VTC Du Bois', 'Playfair Display', serif;
    font-size: clamp(1.1rem, 2.5vw, 1.6rem);
    color: #ccc;
    font-weight: 400;
    margin-bottom: 16px;
    animation: fadeDown 0.8s ease-out 0.2s both;
  }
  .hero-quote {
    font-family: 'VTC Du Bois', 'Playfair Display', serif;
    font-style: italic;
    color: var(--gold);
    font-size: 1.1rem;
    max-width: 600px;
    margin: 0 auto 40px;
    animation: fadeDown 0.8s ease-out 0.3s both;
  }
  .hero-divider {
    width: 80px;
    height: 3px;
    background: var(--gold);
    margin: 0 auto 40px;
    animation: fadeDown 0.8s ease-out 0.35s both;
  }

  @keyframes fadeDown {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: none; }
  }

  /* MODE SELECTOR */
  .mode-section {
    background: white;
    padding: 60px 20px 40px;
    text-align: center;
  }
  .mode-title {
    font-family: 'VTC Du Bois', 'Playfair Display', serif;
    font-size: 2rem;
    margin-bottom: 8px;
  }
  .mode-subtitle {
    color: #666;
    font-size: 1.05rem;
    margin-bottom: 36px;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }
  .mode-cards {
    display: flex;
    justify-content: center;
    gap: 30px;
    flex-wrap: wrap;
    max-width: 800px;
    margin: 0 auto;
  }
  .mode-card {
    flex: 1;
    min-width: 280px;
    max-width: 360px;
    border-radius: 20px;
    padding: 40px 30px;
    cursor: pointer;
    transition: all 0.4s;
    text-align: center;
    border: 3px solid transparent;
    position: relative;
    overflow: hidden;
  }
  .mode-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 6px;
  }
  .mode-card.explorer {
    background: linear-gradient(135deg, #fdf8ef, #f5eed8);
    border-color: var(--gold);
  }
  .mode-card.explorer::before { background: var(--gold); }
  .mode-card.scholar {
    background: linear-gradient(135deg, #f5f0f0, #ede4e4);
    border-color: var(--crimson);
  }
  .mode-card.scholar::before { background: var(--crimson); }
  .mode-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 12px 40px rgba(0,0,0,0.12);
  }
  .mode-card.selected {
    transform: translateY(-6px);
    box-shadow: 0 12px 40px rgba(0,0,0,0.15);
  }
  .mode-card.explorer.selected { border-color: var(--dark-gold); background: linear-gradient(135deg, #faf3df, #f0e4c0); }
  .mode-card.scholar.selected { border-color: var(--crimson); background: linear-gradient(135deg, #f0e0e0, #e8d0d0); }
  .mode-icon {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    margin: 0 auto 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.2rem;
  }
  .mode-card.explorer .mode-icon { background: rgba(197,165,90,0.2); }
  .mode-card.scholar .mode-icon { background: rgba(139,26,26,0.12); }
  .mode-card h3 {
    font-family: 'VTC Du Bois', 'Playfair Display', serif;
    font-size: 1.5rem;
    margin-bottom: 8px;
  }
  .mode-card.explorer h3 { color: var(--dark-gold); }
  .mode-card.scholar h3 { color: var(--crimson); }
  .mode-card p { font-size: 0.92rem; color: #666; line-height: 1.5; }
  .mode-features {
    margin-top: 16px;
    text-align: left;
  }
  .mode-features li {
    font-size: 0.85rem;
    color: #555;
    margin-bottom: 6px;
    list-style: none;
    padding-left: 20px;
    position: relative;
  }
  .mode-features li::before {
    content: '';
    position: absolute;
    left: 0;
    top: 7px;
    width: 10px;
    height: 10px;
    border-radius: 50%;
  }
  .mode-card.explorer .mode-features li::before { background: var(--gold); }
  .mode-card.scholar .mode-features li::before { background: var(--crimson); }

  .mode-selected-display {
    margin-top: 24px;
    font-weight: 600;
    font-size: 0.95rem;
    color: var(--dark-green);
    min-height: 24px;
  }

  /* LESSONS */
  .lessons-section {
    padding: 60px 20px 80px;
    max-width: 1100px;
    margin: 0 auto;
  }
  .lessons-header {
    text-align: center;
    margin-bottom: 50px;
  }
  .lessons-header h2 {
    font-family: 'VTC Du Bois', 'Playfair Display', serif;
    font-size: 2.2rem;
    margin-bottom: 8px;
  }
  .lessons-header p { color: #666; font-size: 1.05rem; }

  .lesson-cards {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;
  }
  .lesson-card {
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 8px 30px rgba(0,0,0,0.08);
    transition: all 0.4s;
    background: white;
    display: flex;
    flex-direction: column;
  }
  .lesson-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 16px 50px rgba(0,0,0,0.14);
  }
  .lesson-banner {
    height: 220px;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }
  .lesson-card:nth-child(1) .lesson-banner {
    background: linear-gradient(135deg, #2c1810, var(--crimson), #5a1a1a);
  }
  .lesson-card:nth-child(2) .lesson-banner {
    background: linear-gradient(135deg, var(--brown), var(--dark-gold), #8a7030);
  }
  .lesson-banner-content {
    position: relative;
    z-index: 2;
    text-align: center;
    color: white;
    padding: 20px;
  }
  .lesson-number {
    display: inline-block;
    background: rgba(255,255,255,0.2);
    padding: 4px 16px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 700;
    letter-spacing: 2px;
    text-transform: uppercase;
    margin-bottom: 12px;
  }
  .lesson-banner-content h3 {
    font-family: 'VTC Du Bois', 'Playfair Display', serif;
    font-size: 1.8rem;
    line-height: 1.2;
    margin-bottom: 4px;
  }
  .lesson-banner-content p {
    font-size: 0.9rem;
    opacity: 0.85;
  }
  .lesson-banner svg {
    position: absolute;
    opacity: 0.08;
    width: 300px;
    height: 300px;
    right: -50px;
    top: 50%;
    transform: translateY(-50%);
  }

  .lesson-body {
    padding: 28px 30px;
    flex: 1;
    display: flex;
    flex-direction: column;
  }
  .lesson-meta {
    display: flex;
    gap: 16px;
    margin-bottom: 16px;
    flex-wrap: wrap;
  }
  .lesson-meta-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.82rem;
    color: #888;
    font-weight: 600;
  }
  .lesson-meta-icon {
    width: 28px;
    height: 28px;
    border-radius: 6px;
    background: var(--parchment);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.9rem;
  }
  .lesson-desc {
    font-size: 0.95rem;
    color: #555;
    line-height: 1.6;
    margin-bottom: 20px;
    flex: 1;
  }
  .lesson-topics {
    margin-bottom: 20px;
  }
  .lesson-topics h4 {
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: #999;
    margin-bottom: 10px;
  }
  .topic-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
  }
  .topic-tag {
    background: var(--parchment);
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.78rem;
    font-weight: 600;
    color: #666;
  }

  .lesson-cta {
    display: block;
    text-align: center;
    padding: 14px;
    border-radius: 10px;
    text-decoration: none;
    font-weight: 700;
    font-size: 1rem;
    transition: all 0.3s;
    letter-spacing: 0.5px;
  }
  .lesson-card:nth-child(1) .lesson-cta {
    background: var(--crimson);
    color: white;
  }
  .lesson-card:nth-child(1) .lesson-cta:hover { background: #a52020; }
  .lesson-card:nth-child(2) .lesson-cta {
    background: var(--black);
    color: white;
  }
  .lesson-card:nth-child(2) .lesson-cta:hover { background: #333; }

  /* ABOUT */
  .about-section {
    background: var(--tan);
    padding: 60px 20px;
  }
  .about-inner {
    max-width: 900px;
    margin: 0 auto;
    text-align: center;
  }
  .about-inner h2 {
    font-family: 'VTC Du Bois', 'Playfair Display', serif;
    font-size: 1.8rem;
    margin-bottom: 16px;
  }
  .about-inner p {
    font-size: 1rem;
    color: #555;
    line-height: 1.7;
    margin-bottom: 12px;
  }
  .about-stats {
    display: flex;
    justify-content: center;
    gap: 50px;
    margin-top: 30px;
    flex-wrap: wrap;
  }
  .about-stat {
    text-align: center;
  }
  .about-stat-num {
    font-family: 'VTC Du Bois', 'Playfair Display', serif;
    font-size: 2.5rem;
    font-weight: 900;
    color: var(--crimson);
    line-height: 1;
  }
  .about-stat-label {
    font-size: 0.85rem;
    color: #888;
    margin-top: 4px;
  }

  /* FOOTER */
  footer {
    background: var(--black);
    color: #888;
    text-align: center;
    padding: 36px 20px;
    font-size: 0.85rem;
  }
  footer strong { color: var(--gold); }
  footer blockquote {
    font-family: 'VTC Du Bois', 'Playfair Display', serif;
    font-size: 1.2rem;
    color: #ccc;
    max-width: 700px;
    margin: 0 auto 12px;
    font-style: italic;
  }

  /* TYPEWRITER CURSOR */
  .typewriter-cursor { display: inline-block; width: 2px; height: 1.1em; background: var(--gold); margin-left: 2px; vertical-align: text-bottom; animation: cursorBlink 0.6s step-end infinite; }
  @keyframes cursorBlink { 0%,100%{opacity:1} 50%{opacity:0} }
  .typewriter-cursor.fade-out { animation: cursorFadeOut 2s forwards; }
  @keyframes cursorFadeOut { 0%{opacity:1} 100%{opacity:0} }

  /* SOUND TOGGLE */
  .sound-toggle { position: fixed; bottom: 24px; right: 24px; z-index: 9999; width: 48px; height: 48px; border-radius: 50%; border: 2px solid var(--gold); background: var(--black); color: var(--gold); font-size: 1.3rem; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: transform 0.2s, box-shadow 0.2s; box-shadow: 0 4px 16px rgba(0,0,0,0.3); }
  .sound-toggle:hover { transform: scale(1.12); box-shadow: 0 6px 24px rgba(0,0,0,0.4); }

  /* TROPHY BUTTON & DRAWER */
  .trophy-btn { position: fixed; bottom: 24px; left: 24px; z-index: 9999; width: 48px; height: 48px; border-radius: 50%; border: 2px solid var(--gold); background: var(--black); color: var(--gold); font-size: 1.3rem; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: transform 0.2s, box-shadow 0.2s; box-shadow: 0 4px 16px rgba(0,0,0,0.3); }
  .trophy-btn:hover { transform: scale(1.12); }
  .trophy-badge-count { position: absolute; top: -4px; right: -4px; background: var(--crimson); color: white; font-size: 0.65rem; font-weight: 700; width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
  .trophy-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 10000; opacity: 0; pointer-events: none; transition: opacity 0.3s; }
  .trophy-overlay.active { opacity: 1; pointer-events: auto; }
  .trophy-drawer { position: fixed; top: 0; left: -360px; width: 340px; height: 100%; background: var(--parchment); z-index: 10001; transition: left 0.4s cubic-bezier(0.4,0,0.2,1); box-shadow: 4px 0 30px rgba(0,0,0,0.2); padding: 32px 24px; overflow-y: auto; }
  .trophy-drawer.open { left: 0; }
  .trophy-drawer h3 { font-family: 'VTC Du Bois', serif; font-size: 1.5rem; margin-bottom: 8px; color: var(--black); }
  .trophy-drawer .drawer-sub { font-size: 0.85rem; color: #888; margin-bottom: 24px; }
  .trophy-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
  .trophy-item { background: white; border-radius: 14px; padding: 18px 12px; text-align: center; border: 2px solid var(--tan); transition: transform 0.2s; }
  .trophy-item.earned { border-color: var(--gold); }
  .trophy-item.locked { filter: grayscale(1); opacity: 0.5; }
  .trophy-item .t-icon { font-size: 2rem; margin-bottom: 6px; }
  .trophy-item .t-name { font-family: 'VTC Du Bois', serif; font-size: 0.9rem; font-weight: 700; margin-bottom: 4px; }
  .trophy-item .t-desc { font-size: 0.72rem; color: #888; line-height: 1.3; }
  .trophy-item.locked .t-lock { font-size: 1.2rem; display: block; margin-top: 2px; }
  .trophy-drawer-close { position: absolute; top: 16px; right: 16px; background: none; border: none; font-size: 1.4rem; cursor: pointer; color: #888; }

  /* BADGE TOAST */
  .badge-toast { position: fixed; top: 24px; right: -400px; z-index: 10002; background: var(--black); color: white; border-radius: 14px; padding: 16px 24px; display: flex; align-items: center; gap: 14px; box-shadow: 0 8px 32px rgba(0,0,0,0.3); border-left: 4px solid var(--gold); transition: right 0.5s cubic-bezier(0.4,0,0.2,1); max-width: 320px; }
  .badge-toast.show { right: 24px; }
  .badge-toast .toast-icon { font-size: 2rem; }
  .badge-toast .toast-text strong { display: block; color: var(--gold); font-family: 'VTC Du Bois', serif; font-size: 1rem; }
  .badge-toast .toast-text span { font-size: 0.8rem; color: #ccc; }

  /* PARALLAX DIVIDERS */
  .parallax-divider { position: relative; height: 140px; overflow: hidden; display: flex; align-items: center; justify-content: center; }
  .parallax-divider .parallax-svg { position: absolute; opacity: 0.12; will-change: transform; }
  .parallax-divider .divider-line { position: absolute; width: 60%; height: 1px; background: linear-gradient(90deg, transparent 0%, var(--gold) 50%, transparent 100%); top: 50%; left: 20%; }

  /* SVG BORDER ART */
  .svg-border-wrap { position: absolute; inset: -4px; pointer-events: none; z-index: 1; }
  .svg-border-wrap svg { width: 100%; height: 100%; }
  .svg-border-line { fill: none; stroke-width: 2; stroke-dasharray: 2000; stroke-dashoffset: 2000; transition: stroke-dashoffset 2.5s ease-in-out; }
  .svg-border-line.animate { stroke-dashoffset: 0; }
  .svg-border-circle { fill: none; stroke-width: 1.5; stroke-dasharray: 200; stroke-dashoffset: 200; transition: stroke-dashoffset 2.5s ease-in-out 0.5s; }
  .svg-border-circle.animate { stroke-dashoffset: 0; }
  .mode-section, .lesson-card { position: relative; }

  @media (max-width: 768px) {
    .lesson-cards { grid-template-columns: 1fr; }
    .mode-cards { flex-direction: column; align-items: center; }
  }
</style>
</head>
<body>

<!-- HERO -->
<section class="hero">
  <svg class="spiral-left" viewBox="0 0 400 400"><path d="M200,200 m0,-150 a150,150 0 1,1 0,300 a130,130 0 1,0 0,-260 a110,110 0 1,1 0,220 a90,90 0 1,0 0,-180 a70,70 0 1,1 0,140 a50,50 0 1,0 0,-100 a30,30 0 1,1 0,60" fill="none" stroke="rgba(139,26,26,0.7)" stroke-width="3"/></svg>
  <svg class="spiral-right" viewBox="0 0 400 400"><path d="M200,200 m0,-150 a150,150 0 1,1 0,300 a130,130 0 1,0 0,-260 a110,110 0 1,1 0,220 a90,90 0 1,0 0,-180 a70,70 0 1,1 0,140 a50,50 0 1,0 0,-100 a30,30 0 1,1 0,60" fill="none" stroke="rgba(197,165,90,0.7)" stroke-width="3"/></svg>

  <div class="hero-content">
    <div class="hero-badge">Interactive Learning Experience</div>
    <h1><span>Du Bois</span> Does Data</h1>
    <h2>Seeing the Story of the Color Line</h2>
    <div class="hero-divider"></div>
    <p class="hero-quote">"Imagine what we might be if we grow to what we wish." &mdash; W.E.B. Du Bois</p>
  </div>
</section>

<!-- PARALLAX DIVIDER 1: Concentric Circles -->
<div class="parallax-divider" data-speed="0.3">
  <svg class="parallax-svg" width="400" height="400" viewBox="0 0 400 400"><circle cx="200" cy="200" r="40" fill="none" stroke="#C5A55A" stroke-width="1.5"/><circle cx="200" cy="200" r="70" fill="none" stroke="#8B1A1A" stroke-width="1.5"/><circle cx="200" cy="200" r="100" fill="none" stroke="#C5A55A" stroke-width="1"/><circle cx="200" cy="200" r="130" fill="none" stroke="#8B1A1A" stroke-width="1"/><circle cx="200" cy="200" r="160" fill="none" stroke="#C5A55A" stroke-width="0.8"/><circle cx="200" cy="200" r="190" fill="none" stroke="#6B4226" stroke-width="0.6"/></svg>
  <div class="divider-line"></div>
</div>

<!-- MODE SELECTOR -->
<section class="mode-section" id="mode">
  <h2 class="mode-title">Choose Your Learning Mode</h2>
  <p class="mode-subtitle">Select how you'd like to experience these lessons. Your choice carries across both lessons.</p>
  <div class="mode-cards">
    <div class="mode-card explorer" id="explorerCard" onclick="selectMode('explorer')">
      <div class="mode-icon">&#128269;</div>
      <h3>Explorer</h3>
      <p>Guided, visual, and hands-on. Perfect for discovering the story step by step.</p>
      <ul class="mode-features">
        <li>Visual hints &amp; animated walkthroughs</li>
        <li>Fun facts &amp; "Did You Know?" callouts</li>
        <li>Simpler math challenges with hints</li>
        <li>Guided chart-reading activities</li>
        <li>Colorful badges for progress</li>
      </ul>
    </div>
    <div class="mode-card scholar" id="scholarCard" onclick="selectMode('scholar')">
      <div class="mode-icon">&#128218;</div>
      <h3>Scholar</h3>
      <p>Analytical, in-depth, and challenging. For those ready to think critically about data and justice.</p>
      <ul class="mode-features">
        <li>Primary source analysis exercises</li>
        <li>Advanced math &amp; data interpretation</li>
        <li>Critical thinking discussion prompts</li>
        <li>Extended writing &amp; argument building</li>
        <li>Connections to modern data journalism</li>
      </ul>
    </div>
  </div>
  <div class="mode-selected-display" id="modeDisplay"></div>
</section>

<!-- PARALLAX DIVIDER 2: Radial Lines -->
<div class="parallax-divider" data-speed="0.5">
  <svg class="parallax-svg" width="400" height="400" viewBox="0 0 400 400"><line x1="200" y1="200" x2="200" y2="20" stroke="#C5A55A" stroke-width="1"/><line x1="200" y1="200" x2="327" y2="56" stroke="#8B1A1A" stroke-width="1"/><line x1="200" y1="200" x2="380" y2="200" stroke="#C5A55A" stroke-width="1"/><line x1="200" y1="200" x2="327" y2="344" stroke="#6B4226" stroke-width="1"/><line x1="200" y1="200" x2="200" y2="380" stroke="#C5A55A" stroke-width="1"/><line x1="200" y1="200" x2="73" y2="344" stroke="#8B1A1A" stroke-width="1"/><line x1="200" y1="200" x2="20" y2="200" stroke="#C5A55A" stroke-width="1"/><line x1="200" y1="200" x2="73" y2="56" stroke="#6B4226" stroke-width="1"/><line x1="200" y1="200" x2="263" y2="35" stroke="#2D5A3D" stroke-width="0.7"/><line x1="200" y1="200" x2="365" y2="137" stroke="#2D5A3D" stroke-width="0.7"/><line x1="200" y1="200" x2="365" y2="263" stroke="#2D5A3D" stroke-width="0.7"/><line x1="200" y1="200" x2="263" y2="365" stroke="#2D5A3D" stroke-width="0.7"/><line x1="200" y1="200" x2="137" y2="365" stroke="#2D5A3D" stroke-width="0.7"/><line x1="200" y1="200" x2="35" y2="263" stroke="#2D5A3D" stroke-width="0.7"/><line x1="200" y1="200" x2="35" y2="137" stroke="#2D5A3D" stroke-width="0.7"/><line x1="200" y1="200" x2="137" y2="35" stroke="#2D5A3D" stroke-width="0.7"/><circle cx="200" cy="200" r="5" fill="#C5A55A" opacity="0.4"/></svg>
  <div class="divider-line"></div>
</div>

<!-- LESSONS -->
<section class="lessons-section" id="lessons">
  <div class="lessons-header">
    <h2>Choose Your Lesson</h2>
    <p>Two immersive experiences, each designed for 60&ndash;90 minutes of engagement.</p>
  </div>

  <div class="lesson-cards">
    <!-- LESSON 1 -->
    <div class="lesson-card">
      <div class="lesson-banner">
        <svg viewBox="0 0 400 400"><path d="M200,200 m0,-150 a150,150 0 1,1 0,300 a130,130 0 1,0 0,-260 a110,110 0 1,1 0,220 a90,90 0 1,0 0,-180 a70,70 0 1,1 0,140 a50,50 0 1,0 0,-100 a30,30 0 1,1 0,60" fill="none" stroke="white" stroke-width="3"/></svg>
        <div class="lesson-banner-content">
          <div class="lesson-number">Lesson 1</div>
          <h3>Become a Data Detective</h3>
          <p>Uncover the Truth with W.E.B. Du Bois</p>
        </div>
      </div>
      <div class="lesson-body">
        <div class="lesson-meta">
          <div class="lesson-meta-item">
            <div class="lesson-meta-icon">&#9201;</div>
            60&ndash;90 min
          </div>
          <div class="lesson-meta-item">
            <div class="lesson-meta-icon">&#9881;</div>
            9 Sections
          </div>
          <div class="lesson-meta-item">
            <div class="lesson-meta-icon">&#9733;</div>
            Interactive
          </div>
        </div>
        <p class="lesson-desc">Step into the role of a data detective. Travel back to Paris, 1900, and discover how W.E.B. Du Bois used stunning hand-drawn charts to fight racism with facts. Learn the 5-step toolkit for reading any chart, investigate 3 powerful clues in the data, and create your own data visualization.</p>
        <div class="lesson-topics">
          <h4>What You'll Explore</h4>
          <div class="topic-tags">
            <span class="topic-tag">Paris 1900</span>
            <span class="topic-tag">Du Bois Bio</span>
            <span class="topic-tag">Chart Reading</span>
            <span class="topic-tag">Population Growth</span>
            <span class="topic-tag">Great Migration</span>
            <span class="topic-tag">Education Rise</span>
            <span class="topic-tag">Build a Chart</span>
            <span class="topic-tag">8-Question Quiz</span>
          </div>
        </div>
        <a href="lesson1-detective.html" class="lesson-cta" id="lesson1Link" onclick="passMode(this)">Start Lesson 1</a>
      </div>
    </div>

    <!-- LESSON 2 -->
    <div class="lesson-card">
      <div class="lesson-banner">
        <svg viewBox="0 0 400 400"><rect x="60" y="100" width="50" height="200" rx="4" fill="white" opacity="0.2"/><rect x="130" y="60" width="50" height="240" rx="4" fill="white" opacity="0.2"/><rect x="200" y="140" width="50" height="160" rx="4" fill="white" opacity="0.2"/><rect x="270" y="30" width="50" height="270" rx="4" fill="white" opacity="0.2"/></svg>
        <div class="lesson-banner-content">
          <div class="lesson-number">Lesson 2</div>
          <h3>Du Bois Does Data</h3>
          <p>Seeing the Story of the Color Line</p>
        </div>
      </div>
      <div class="lesson-body">
        <div class="lesson-meta">
          <div class="lesson-meta-item">
            <div class="lesson-meta-icon">&#9201;</div>
            60&ndash;90 min
          </div>
          <div class="lesson-meta-item">
            <div class="lesson-meta-icon">&#9881;</div>
            9 Sections
          </div>
          <div class="lesson-meta-item">
            <div class="lesson-meta-icon">&#9733;</div>
            Advanced
          </div>
        </div>
        <p class="lesson-desc">Go deeper into Du Bois's data revolution. Analyze the occupation transformation from farms to offices over 125 years, investigate two education gaps with opposite trajectories, wrestle with the difference between absolute progress and relative parity, and build your own data-driven argument.</p>
        <div class="lesson-topics">
          <h4>What You'll Analyze</h4>
          <div class="topic-tags">
            <span class="topic-tag">Color Line</span>
            <span class="topic-tag">Pseudoscience vs Data</span>
            <span class="topic-tag">Southern Population</span>
            <span class="topic-tag">Migration Maps</span>
            <span class="topic-tag">Education Gaps</span>
            <span class="topic-tag">Occupation Shift</span>
            <span class="topic-tag">Progress vs Parity</span>
            <span class="topic-tag">Build an Argument</span>
          </div>
        </div>
        <a href="lesson2-data.html" class="lesson-cta" id="lesson2Link" onclick="passMode(this)">Start Lesson 2</a>
      </div>
    </div>
  </div>
</section>

<!-- PARALLAX DIVIDER 3: Nested Squares/Diamonds -->
<div class="parallax-divider" data-speed="0.2">
  <svg class="parallax-svg" width="400" height="400" viewBox="0 0 400 400"><rect x="140" y="140" width="120" height="120" fill="none" stroke="#C5A55A" stroke-width="1.5" transform="rotate(0 200 200)"/><rect x="140" y="140" width="120" height="120" fill="none" stroke="#8B1A1A" stroke-width="1.2" transform="rotate(15 200 200)"/><rect x="140" y="140" width="120" height="120" fill="none" stroke="#C5A55A" stroke-width="1" transform="rotate(30 200 200)"/><rect x="140" y="140" width="120" height="120" fill="none" stroke="#6B4226" stroke-width="0.8" transform="rotate(45 200 200)"/><rect x="120" y="120" width="160" height="160" fill="none" stroke="#2D5A3D" stroke-width="0.6" transform="rotate(0 200 200)"/><rect x="120" y="120" width="160" height="160" fill="none" stroke="#2D5A3D" stroke-width="0.6" transform="rotate(45 200 200)"/><rect x="100" y="100" width="200" height="200" fill="none" stroke="#C5A55A" stroke-width="0.5" transform="rotate(0 200 200)"/><rect x="100" y="100" width="200" height="200" fill="none" stroke="#C5A55A" stroke-width="0.5" transform="rotate(45 200 200)"/></svg>
  <div class="divider-line"></div>
</div>

<!-- ABOUT -->
<section class="about-section">
  <div class="about-inner">
    <h2>About This Experience</h2>
    <p>This educational resource is based on the pioneering work of <strong>W.E.B. Du Bois</strong> and his team at Atlanta University, who created groundbreaking data visualizations for the 1900 Paris World's Fair. Their work used empirical data to counter racist narratives and demonstrate the progress and potential of Black Americans.</p>
    <p>Content is drawn from the <em>Du Bois Does Data</em> exhibit and scholarly research on Du Bois's data portraits, including analysis of how his methods connect to modern data justice and visualization.</p>
    <div class="about-stats">
      <div class="about-stat">
        <div class="about-stat-num">63</div>
        <div class="about-stat-label">Original Charts</div>
      </div>
      <div class="about-stat">
        <div class="about-stat-num">1900</div>
        <div class="about-stat-label">Paris Exhibition</div>
      </div>
      <div class="about-stat">
        <div class="about-stat-num">50M</div>
        <div class="about-stat-label">Fair Visitors</div>
      </div>
      <div class="about-stat">
        <div class="about-stat-num">125</div>
        <div class="about-stat-label">Years of Data</div>
      </div>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer>
  <blockquote>"What we Americans want is freedom to know the truth and the right to think and to act as seems wisest to us under the democratic process."</blockquote>
  <p>&mdash; <strong>W.E.B. Du Bois</strong></p>
  <p style="margin-top:16px;">Based on <strong>Du Bois Does Data</strong> &bull; An educational resource exploring data visualization as a tool for activism.</p>
</footer>

<!-- SOUND TOGGLE -->
<button class="sound-toggle" id="soundToggle" aria-label="Toggle sound">&#128264;</button>

<!-- TROPHY SYSTEM -->
<button class="trophy-btn" id="trophyBtn" aria-label="View achievements"><span>&#127942;</span><div class="trophy-badge-count" id="trophyCount">0</div></button>
<div class="trophy-overlay" id="trophyOverlay"></div>
<div class="trophy-drawer" id="trophyDrawer">
  <button class="trophy-drawer-close" id="trophyClose">&times;</button>
  <h3>&#127942; Achievements</h3>
  <p class="drawer-sub">Earn badges as you explore the Du Bois experience.</p>
  <div class="trophy-grid" id="trophyGrid"></div>
</div>

<!-- BADGE TOAST -->
<div class="badge-toast" id="badgeToast">
  <div class="toast-icon" id="toastIcon"></div>
  <div class="toast-text"><strong id="toastTitle"></strong><span id="toastDesc"></span></div>
</div>

<script>
let selectedMode = localStorage.getItem('dubois-mode') || null;

function selectMode(mode) {
  selectedMode = mode;
  localStorage.setItem('dubois-mode', mode);

  document.getElementById('explorerCard').classList.toggle('selected', mode === 'explorer');
  document.getElementById('scholarCard').classList.toggle('selected', mode === 'scholar');

  const display = document.getElementById('modeDisplay');
  if (mode === 'explorer') {
    display.innerHTML = 'Explorer Mode selected &mdash; guided, visual, and fun!';
  } else {
    display.innerHTML = 'Scholar Mode selected &mdash; analytical, in-depth, and challenging!';
  }
}

function passMode(el) {
  if (selectedMode) {
    const url = new URL(el.href, window.location);
    url.searchParams.set('mode', selectedMode);
    el.href = url.toString();
  }
}

/* ===== FEATURE 1: SOUND & MUSIC SYSTEM ===== */
const AudioCtx = window.AudioContext || window.webkitAudioContext;
let audioCtx = null;
let soundMuted = localStorage.getItem('dubois-sound-muted') === 'true';

function ensureAudioCtx() {
  if (!audioCtx) audioCtx = new AudioCtx();
  if (audioCtx.state === 'suspended') audioCtx.resume();
  return audioCtx;
}

function playTone(freq, duration, type, vol) {
  if (soundMuted) return;
  const ctx = ensureAudioCtx();
  const osc = ctx.createOscillator();
  const gain = ctx.createGain();
  osc.type = type || 'sine';
  osc.frequency.setValueAtTime(freq, ctx.currentTime);
  gain.gain.setValueAtTime(vol || 0.08, ctx.currentTime);
  gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + duration);
  osc.connect(gain);
  gain.connect(ctx.destination);
  osc.start();
  osc.stop(ctx.currentTime + duration);
}

function sfxClick() { playTone(880, 0.08, 'square', 0.06); }
function sfxHover() { playTone(660, 0.06, 'sine', 0.03); }
function sfxCelebration() {
  if (soundMuted) return;
  [523, 659, 784, 1047].forEach(function(f, i) {
    setTimeout(function() { playTone(f, 0.15, 'triangle', 0.07); }, i * 100);
  });
}
function sfxWhoosh() {
  if (soundMuted) return;
  const ctx = ensureAudioCtx();
  const osc = ctx.createOscillator();
  const gain = ctx.createGain();
  osc.type = 'sine';
  osc.frequency.setValueAtTime(400, ctx.currentTime);
  osc.frequency.exponentialRampToValueAtTime(100, ctx.currentTime + 0.25);
  gain.gain.setValueAtTime(0.06, ctx.currentTime);
  gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.25);
  osc.connect(gain);
  gain.connect(ctx.destination);
  osc.start();
  osc.stop(ctx.currentTime + 0.3);
}

const soundToggleBtn = document.getElementById('soundToggle');
function updateSoundIcon() {
  soundToggleBtn.innerHTML = soundMuted ? '&#128263;' : '&#128264;';
}
updateSoundIcon();
soundToggleBtn.addEventListener('click', function() {
  soundMuted = !soundMuted;
  localStorage.setItem('dubois-sound-muted', soundMuted);
  updateSoundIcon();
  if (!soundMuted) sfxClick();
});

/* Add sounds to mode cards */
document.querySelectorAll('.mode-card').forEach(function(card) {
  card.addEventListener('mouseenter', sfxHover);
  card.addEventListener('click', function() { sfxClick(); sfxCelebration(); });
});
/* Add sounds to lesson CTA links */
document.querySelectorAll('.lesson-cta').forEach(function(link) {
  link.addEventListener('mouseenter', sfxHover);
  link.addEventListener('click', function() { sfxClick(); sfxWhoosh(); });
});

/* ===== FEATURE 2: ACHIEVEMENT BADGE SYSTEM ===== */
const ALL_BADGES = [
  { id: 'first-steps', name: 'First Steps', icon: '&#128099;', desc: 'Visited the hub page' },
  { id: 'mode-picker', name: 'Decision Maker', icon: '&#129300;', desc: 'Chose a learning mode' },
  { id: 'lesson-starter', name: 'Adventure Begins', icon: '&#128640;', desc: 'Started a lesson' }
];

let earnedBadges = [];
try { earnedBadges = JSON.parse(localStorage.getItem('dubois-badges')) || []; } catch(e) { earnedBadges = []; }

function saveBadges() { localStorage.setItem('dubois-badges', JSON.stringify(earnedBadges)); }

function showToast(badge) {
  const toast = document.getElementById('badgeToast');
  document.getElementById('toastIcon').innerHTML = badge.icon;
  document.getElementById('toastTitle').textContent = badge.name + ' Unlocked!';
  document.getElementById('toastDesc').textContent = badge.desc;
  toast.classList.add('show');
  setTimeout(function() { toast.classList.remove('show'); }, 3500);
}

function awardBadge(badgeId) {
  if (earnedBadges.indexOf(badgeId) !== -1) return;
  earnedBadges.push(badgeId);
  saveBadges();
  updateTrophyCount();
  const badge = ALL_BADGES.find(function(b) { return b.id === badgeId; });
  if (badge) showToast(badge);
  renderTrophyGrid();
}

function updateTrophyCount() {
  document.getElementById('trophyCount').textContent = earnedBadges.length;
}

function renderTrophyGrid() {
  const grid = document.getElementById('trophyGrid');
  grid.innerHTML = ALL_BADGES.map(function(b) {
    const earned = earnedBadges.indexOf(b.id) !== -1;
    return '<div class="trophy-item ' + (earned ? 'earned' : 'locked') + '">' +
      '<div class="t-icon">' + (earned ? b.icon : '&#128274;') + '</div>' +
      '<div class="t-name">' + b.name + '</div>' +
      '<div class="t-desc">' + b.desc + '</div>' +
      (earned ? '' : '<span class="t-lock">&#128274;</span>') +
      '</div>';
  }).join('');
}

updateTrophyCount();
renderTrophyGrid();

/* Trophy drawer toggle */
const trophyBtn = document.getElementById('trophyBtn');
const trophyDrawer = document.getElementById('trophyDrawer');
const trophyOverlay = document.getElementById('trophyOverlay');
const trophyClose = document.getElementById('trophyClose');

function openTrophy() { trophyDrawer.classList.add('open'); trophyOverlay.classList.add('active'); sfxClick(); }
function closeTrophy() { trophyDrawer.classList.remove('open'); trophyOverlay.classList.remove('active'); }
trophyBtn.addEventListener('click', openTrophy);
trophyOverlay.addEventListener('click', closeTrophy);
trophyClose.addEventListener('click', closeTrophy);

/* Award first-steps on page load */
setTimeout(function() { awardBadge('first-steps'); }, 2000);

/* Award mode-picker when mode card is clicked */
document.querySelectorAll('.mode-card').forEach(function(card) {
  card.addEventListener('click', function() { awardBadge('mode-picker'); });
});

/* Award lesson-starter when lesson CTA is clicked */
document.querySelectorAll('.lesson-cta').forEach(function(link) {
  link.addEventListener('click', function() { awardBadge('lesson-starter'); });
});

/* ===== FEATURE 3: ANIMATED TYPEWRITER QUOTES ===== */
(function() {
  const quoteEl = document.querySelector('.hero-quote');
  if (!quoteEl) return;
  const fullText = quoteEl.textContent;
  quoteEl.textContent = '';
  const cursor = document.createElement('span');
  cursor.className = 'typewriter-cursor';
  quoteEl.appendChild(cursor);

  setTimeout(function() {
    let i = 0;
    function typeNext() {
      if (i < fullText.length) {
        quoteEl.insertBefore(document.createTextNode(fullText[i]), cursor);
        i++;
        setTimeout(typeNext, 40);
      } else {
        setTimeout(function() { cursor.classList.add('fade-out'); }, 2000);
      }
    }
    typeNext();
  }, 1500);
})();

/* ===== FEATURE 4: PARALLAX SCROLLING ===== */
(function() {
  const dividers = document.querySelectorAll('.parallax-divider');
  function onScroll() {
    const scrollY = window.pageYOffset;
    dividers.forEach(function(div) {
      const speed = parseFloat(div.getAttribute('data-speed')) || 0.3;
      const svg = div.querySelector('.parallax-svg');
      if (!svg) return;
      const rect = div.getBoundingClientRect();
      if (rect.bottom > 0 && rect.top < window.innerHeight) {
        const offset = (scrollY - div.offsetTop + window.innerHeight) * speed;
        svg.style.transform = 'translateY(' + (offset * 0.3) + 'px) rotate(' + (offset * 0.02) + 'deg)';
      }
    });
  }
  window.addEventListener('scroll', onScroll, { passive: true });
  onScroll();
})();

/* ===== FEATURE 5: SVG BORDER ART (self-drawing) ===== */
(function() {
  function createBorderSVG(el, color) {
    const wrap = document.createElement('div');
    wrap.className = 'svg-border-wrap';
    const svgNS = 'http://www.w3.org/2000/svg';
    const svg = document.createElementNS(svgNS, 'svg');
    svg.setAttribute('viewBox', '0 0 1000 600');
    svg.setAttribute('preserveAspectRatio', 'none');
    /* Main border rectangle path with corner spirals */
    const path = document.createElementNS(svgNS, 'path');
    path.setAttribute('d', 'M40,10 L960,10 Q990,10 990,40 L990,560 Q990,590 960,590 L40,590 Q10,590 10,560 L10,40 Q10,10 40,10 M40,10 C25,10 10,25 10,10 M960,10 C975,10 990,25 990,10 M960,590 C975,590 990,575 990,590 M40,590 C25,590 10,575 10,590');
    path.setAttribute('class', 'svg-border-line');
    path.setAttribute('stroke', color);
    svg.appendChild(path);
    /* Corner circles */
    var corners = [[20,20],[980,20],[980,580],[20,580]];
    corners.forEach(function(c) {
      var circ = document.createElementNS(svgNS, 'circle');
      circ.setAttribute('cx', c[0]);
      circ.setAttribute('cy', c[1]);
      circ.setAttribute('r', '12');
      circ.setAttribute('class', 'svg-border-circle');
      circ.setAttribute('stroke', color);
      svg.appendChild(circ);
    });
    /* Small decorative circles at midpoints */
    var mids = [[500,10],[500,590],[10,300],[990,300]];
    mids.forEach(function(m) {
      var circ = document.createElementNS(svgNS, 'circle');
      circ.setAttribute('cx', m[0]);
      circ.setAttribute('cy', m[1]);
      circ.setAttribute('r', '6');
      circ.setAttribute('class', 'svg-border-circle');
      circ.setAttribute('stroke', color);
      svg.appendChild(circ);
    });
    /* Corner spiral accents */
    var spirals = [
      'M20,20 Q20,5 35,5 Q50,5 50,20 Q50,35 35,35 Q25,35 25,25',
      'M980,20 Q980,5 965,5 Q950,5 950,20 Q950,35 965,35 Q975,35 975,25',
      'M980,580 Q980,595 965,595 Q950,595 950,580 Q950,565 965,565 Q975,565 975,575',
      'M20,580 Q20,595 35,595 Q50,595 50,580 Q50,565 35,565 Q25,565 25,575'
    ];
    spirals.forEach(function(d) {
      var sp = document.createElementNS(svgNS, 'path');
      sp.setAttribute('d', d);
      sp.setAttribute('class', 'svg-border-line');
      sp.setAttribute('stroke', color);
      svg.appendChild(sp);
    });
    wrap.appendChild(svg);
    el.style.position = 'relative';
    el.appendChild(wrap);
    return wrap;
  }

  /* Apply borders */
  var modeSection = document.querySelector('.mode-section');
  var lessonCards = document.querySelectorAll('.lesson-card');
  var borderTargets = [];

  if (modeSection) borderTargets.push({ el: modeSection, color: '#C5A55A' });
  if (lessonCards[0]) borderTargets.push({ el: lessonCards[0], color: '#8B1A1A' });
  if (lessonCards[1]) borderTargets.push({ el: lessonCards[1], color: '#6B4226' });

  borderTargets.forEach(function(t) {
    var wrap = createBorderSVG(t.el, t.color);
    var observer = new IntersectionObserver(function(entries) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          wrap.querySelectorAll('.svg-border-line, .svg-border-circle').forEach(function(el) {
            el.classList.add('animate');
          });
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.2 });
    observer.observe(t.el);
  });
})();

// Restore saved mode
if (selectedMode) selectMode(selectedMode);
</script>
</body>
</html>
